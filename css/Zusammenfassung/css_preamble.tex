% !TEX root = ./css_summary.tex

% =============================================================================
% PACKAGE LOADING - ORGANIZED BY FUNCTIONALITY
% =============================================================================

% -----------------------------------------------------------------------------
% 1. DOCUMENT LAYOUT & TYPOGRAPHY
% -----------------------------------------------------------------------------
\usepackage[margin=2cm]{geometry}           % Page margins
\usepackage{parskip}                        % Remove paragraph indentation
\usepackage[protrusion=true,expansion=true]{microtype} % Typographic refinements
\usepackage[english]{babel}                 % Language support
\usepackage{csquotes}                       % Context-sensitive quotation marks

% -----------------------------------------------------------------------------
% 2. MATHEMATICS
% -----------------------------------------------------------------------------
\usepackage{amsmath, amsfonts, amsthm, amssymb} % AMS math packages
\usepackage{mathtools}                      % Enhanced math tools

% -----------------------------------------------------------------------------
% 3. GRAPHICS & COLOR
% -----------------------------------------------------------------------------
\usepackage{graphicx}                       % Image inclusion
\usepackage[table,xcdraw,dvipsnames,svgnames]{xcolor} % Color support
\usepackage{tikz}                           % Vector graphics
\usepackage{tkz-graph}                      % Graph drawing
\usetikzlibrary{
    matrix, backgrounds, positioning, trees,
    shapes.geometric, calc, arrows, chains
}

% -----------------------------------------------------------------------------
% 4. TABLES
% -----------------------------------------------------------------------------
\usepackage{booktabs}                       % Professional tables
\usepackage{tabularx}                       % Auto-width tables
\usepackage{array}                          % Enhanced column types
\usepackage{longtable}                      % Multi-page tables (if needed)

% -----------------------------------------------------------------------------
% 5. LISTS & FLOATS
% -----------------------------------------------------------------------------
\usepackage{enumitem}                       % Customizable lists
\usepackage{float}                          % Float placement control
\usepackage[hang, small, labelfont=bf, up, textfont=it, up]{caption}

% -----------------------------------------------------------------------------
% 6. ALGORITHMS & CODE LISTINGS
% -----------------------------------------------------------------------------
\usepackage[
    lined, linesnumbered, vlined, commentsnumbered
]{algorithm2e}                              % Pseudocode environment

\usepackage{listings}                       % Code listings
% Listings configuration
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{codeorange}{RGB}{236, 124, 48}
\definecolor{codeblue}{RGB}{70, 113, 196}
\definecolor{codered}{RGB}{192, 0, 0}
\definecolor{backcolour}{rgb}{0.95,0.95,0.95}

\lstdefinestyle{mystyle}{
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2,
    firstnumber=auto,
    frame=topline,
    frameround=tttt,
    otherkeywords={requires,ensures,postcondition,precondition,contract,assert,
            assignable, \\forall, \\exists, \\result, measured_by},
}
\lstset{style=mystyle}

% -----------------------------------------------------------------------------
% 7. COLORED BOXES (tcolorbox)
% -----------------------------------------------------------------------------
\usepackage[most]{tcolorbox}                % Colored boxes with skins

% tcolorbox configurations
\tcbset{
    boxrule=1pt,
    fonttitle=\bfseries,
    width=\textwidth,
    before=\vspace{2pt},
    after=\vspace{2pt},
    inlbox/.style={
            boxsep=0pt, left=6pt, right=6pt, top=2pt, bottom=2pt,
            arc=5pt,
            before upper={\rule[-3pt]{0pt}{10pt}},
            on line,
            before=\space,
            after=\space
        },
    definitionbox/.style={
            colback=\MainColor!2!white,
            colframe=\MainColor!85!black
        },
    mathematicsbox/.style={
            colback=\MathColor!2!white,
            colframe=\MathColor!85!black
        },
    codingbox/.style={
            colback=\CodeColor!2!white,
            colframe=\CodeColor!85!black
        }
}

% Box definitions
\newtcolorbox[]{defbox}[1][]{definitionbox, title=\IfValueTF{#1}{#1}{}}
\newtcolorbox[]{defbox*}[1][]{definitionbox}
\newtcolorbox[]{smalldefbox}[1][]{definitionbox, hbox, title=\IfValueTF{#1}{#1}{}}
\newtcolorbox[]{smalldefbox*}[1][]{definitionbox, hbox}
\newtcbox{\inldefbox}[1][]{definitionbox, inlbox}

\newtcolorbox[]{mathbox}[1][]{mathematicsbox, title=\IfValueTF{#1}{#1}{}}
\newtcolorbox[]{mathbox*}[1][]{mathematicsbox}
\newtcolorbox[]{smallmathbox}[1][]{mathematicsbox, hbox, title=\IfValueTF{#1}{#1}{}}
\newtcolorbox[]{smallmathbox*}[1][]{mathematicsbox, hbox}
\newtcolorbox[]{csmb*}[1][]{mathematicsbox, hbox, center}
\newtcbox{\inlmathbox}[1][]{mathematicsbox, inlbox}

\newtcolorbox[]{codebox}[1][]{codingbox, title=\IfValueTF{#1}{#1}{}}
\newtcolorbox[]{codebox*}[1][]{codingbox}
\newtcolorbox[]{smallcodebox}[1][]{codingbox, hbox, title=\IfValueTF{#1}{#1}{}}
\newtcolorbox[]{smallcodebox*}[1][]{codingbox, hbox}
\newtcbox{\inlcodebox}[1][]{codingbox, inlbox, fontupper=\ttfamily}

% -----------------------------------------------------------------------------
% 8. HYPERREFERENCES & LINKS
% -----------------------------------------------------------------------------
\usepackage[colorlinks, linkcolor=black, urlcolor=cyan]{hyperref}
\usepackage{xurl}                           % Better URL breaking
\usepackage{cleveref}                       % Smart cross-references
\usepackage{lastpage}                       % Reference to last page
\usepackage{xr-hyper}                       % External document references

% -----------------------------------------------------------------------------
% 9. SECTION FORMATTING
% -----------------------------------------------------------------------------
\usepackage{titlesec}                       % Custom section headings
\usepackage{titling}                        % Title page customization
\usepackage{tocloft}                        % Table of contents customization

% -----------------------------------------------------------------------------
% 10. HEADERS & FOOTERS
% -----------------------------------------------------------------------------
\usepackage{fancyhdr}                       % Custom headers/footers

% -----------------------------------------------------------------------------
% 11. MULTI-FILE & OPTIONAL PACKAGES
% -----------------------------------------------------------------------------
\usepackage{subfiles}                       % Split large projects
\usepackage{multicol}                       % Multiple columns (if needed)
\usepackage{pdfpages}                       % Include PDF pages (if needed)
\usepackage[toc,sort=use]{glossaries}       % Glossary support (if needed)

% =============================================================================
% CUSTOM COMMANDS & CONFIGURATIONS
% =============================================================================

% -----------------------------------------------------------------------------
% Utility Commands
% -----------------------------------------------------------------------------
\newcommand{\vcentered}[1]{
    \begingroup
    \setbox0=\hbox{#1}
    \parbox{\wd0}{\box0}
    \endgroup
}

\newcommand{\defc}[1]{{\textbf{\color{\MainColor}#1}}}

% -----------------------------------------------------------------------------
% Table of Contents Configuration
% -----------------------------------------------------------------------------
\setcounter{tocdepth}{3}                    % Exclude subsubsections
\addtolength{\cftsecnumwidth}{0pt}          % Spacing between section number and title
\renewcommand{\contentsname}{\vspace{-20pt}}

% -----------------------------------------------------------------------------
% Algorithm2e Customization
% -----------------------------------------------------------------------------
\SetAlgoNlRelativeSize{-1}
\newcommand\mycommfont[1]{\small\ttfamily\textcolor{codegreen}{#1}}
\SetCommentSty{mycommfont}

% Keyword definitions
\SetKw{KwFalse}{\color{magenta}false}
\SetKw{KwTrue}{\color{magenta}true}
\SetKw{KwRet}{\color{red}return}
\SetKw{KwContinue}{\color{magenta}continue}
\SetKw{KwBreak}{\color{magenta}break}
\SetKw{KwDownTo}{down to}
\SetKw{KwAnd}{\color{magenta}and}
\SetKw{KwOr}{\color{magenta}or}
\SetKw{KwNot}{\color{magenta}not}
\SetKw{KwIn}{\color{magenta}in}
\SetKw{KwError}{\color{red}error}
\SetKw{KwNil}{\color{magenta}NIL}
\SetKw{KwPrint}{\color{magenta}print}

% Type keywords
\SetKw{KwFloat}{\color{teal}float}
\SetKw{KwInt}{\color{teal}int}
\SetKw{KwString}{\color{teal}String}
\SetKw{KwBool}{\color{teal}bool}
\SetKw{KwChar}{\color{teal}char}

% Control structures
\SetKwFor{For}{\color{codegreen}For}{\color{codegreen}do}{\color{codegreen}end}
\SetKwFor{ForEach}{\color{codegreen}ForEach}{\color{codegreen}do}{\color{codegreen}end}
\SetKwFor{While}{\color{codegreen}While}{\color{codegreen}do}{\color{codegreen}end}
\SetKwIF{If}{ElseIf}{Else}{\color{codegreen}If}{\color{codegreen}then}{\color{codegreen}Else If}{\color{codegreen}Else}{\color{codegreen}end}
\SetKwProg{Fn}{\color{codegreen}Function}{:}{}
\SetKwProg{Cl}{\color{codegreen}Class}{:}{}

% -----------------------------------------------------------------------------
% Section Formatting
% -----------------------------------------------------------------------------
\newcommand{\SectionFont}{\LARGE\bfseries}
\titleformat{\section}
{\color{\MainColor} \titlerule[15pt] \color{White} \titlerule[7pt] \color{Black} \titlerule[2pt] \SectionFont}
{\thesection}
{1em}
{\SectionFont}
[{\titlerule[2pt]}]

\newcommand{\SubSectionFont}{\large\bfseries}
\titleformat{\subsection}
{\SubSectionFont}
{\thesubsection}
{1em}
{\SubSectionFont}
[{\color{\MainColor}\titlerule[1pt]\color{White}\titlerule[0.5pt]\color{\MainColor}\titlerule[1pt]}]

\newcommand{\SubSubSectionFont}{\bfseries}
\titleformat{\subsubsection}
{\SubSubSectionFont}
{\thesubsubsection}
{1em}
{\SubSubSectionFont}
[{\color{\MainColor}\titlerule[1pt]}]

% Section numbering
\renewcommand{\thesection}{\arabic{section}}
\renewcommand{\thesubsection}{\arabic{section}.\arabic{subsection}}
\renewcommand{\thesubsubsection}{\arabic{section}.\arabic{subsection}.\arabic{subsubsection}}

% -----------------------------------------------------------------------------
% Header & Footer Configuration
% -----------------------------------------------------------------------------
\pagestyle{fancy}
\lhead{}  % Left Header
\chead{}  % Centre Header  
\rhead{}  % Right Header

\lfoot{\footnotesize \leftmark}              % Left Footer
\cfoot{\footnotesize \rightmark}             % Centre Footer
\rfoot{\footnotesize Page \thepage\ of \pageref{LastPage}} % Right Footer

\renewcommand{\headrulewidth}{0.0pt}         % No header rule
\renewcommand{\footrulewidth}{0.4pt}         % Footer rule thickness

% -----------------------------------------------------------------------------
% External Configuration Files
% -----------------------------------------------------------------------------
\input{summary_individuals.tex}              % Individual summary settings